#include "pzc_builtin.h"
#include "../table.hpp"

union u64tou8 {
  ull u64[2];
  unsigned char u8[16];
};

ull calc_hash(ull me, ull op, ull *table) {
  ull c = 0xFFFFFFFFFFFFFFFFull;
  u64tou8 conv = {{me, op}};
  for (int i = 0; i < 16; ++i) {
    c = table[(c ^ conv.u8[i]) & 0xFF] ^ (c >> 8);
  }
  return c ^ 0xFFFFFFFFFFFFFFFFull;
}
